<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Audio Comparison Experiment</title>
        <link rel="stylesheet" href="style.css">
        <script src="https://unpkg.com/tone"></script>
    </head>
    <body>

        <h1>Audio Comparison Task</h1>

        <div id="instructions">
            <h2>Instructions</h2>
            <p>Welcome! This experiment involves listening carefully to pairs of musical intervals.</p>
            <p>Please ensure you are using headphones and are in a quiet place.</p>
            <p>In each trial, use the "Play A" and "Play B" buttons to listen to the two sounds. You can play them as many times as you like and switch between them.</p>
            <p>Once you have decided, select whether you preferred sound 'A', sound 'B', or if you perceived 'No Difference', using the selection buttons below. Then click 'Submit Choice' to proceed.</p>
            <button id="startButton">Start Experiment</button>
        </div>

        <div id="experiment" style="display: none;">
            <h2 id="trialCounter">Trial X of Y</h2>
            <p>Listen to the sounds and make your selection:</p>

            <div class="play-controls">
                <button type="button" class="playButton" data-target="audioA">Play A</button>
                <button type="button" class="playButton" data-target="audioB">Play B</button>
            </div>

            <div class="segmented-picker" role="radiogroup" aria-labelledby="pickerLabel">
                 <span id="pickerLabel" class="visually-hidden">Select your choice: A, No Difference, or B</span>
                 <button type="button" class="picker-button" data-choice="A">A</button>
                 <button type="button" class="picker-button" data-choice="None">No Difference</button>
                 <button type="button" class="picker-button" data-choice="B">B</button>
            </div>

            <div class="submit-area">
                <button type="button" id="submitChoiceButton" disabled>Submit Choice</button>
            </div>

        </div>

        <div id="completion" style="display: none;">
            <h2>Experiment Complete!</h2>
            <p>Thank you for your participation.</p>
            <textarea id="resultsOutput" rows="10" cols="50" readonly></textarea>
        </div>

        <script src="script.js"></script>

    </body>
</html>
