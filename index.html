<!doctype html>
<html lang="de">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Audio-Vergleichs-Experiment</title>
        <link rel="stylesheet" href="style.css" />
        <script src="https://unpkg.com/tone"></script>
    </head>
    <body>
        <div id="instructions">
            <h2>Anleitung</h2>
            <p>
                Willkommen! Bei diesem Experiment geht es darum, Paare von
                musikalischen Intervallen aufmerksam anzuhören.
            </p>
            <p>
                <strong>WICHTIG:</strong> Für genaue Ergebnisse und das beste
                Erlebnis, stelle bitte sicher, dass du während des gesamten
                Experiments Kopfhörer trägst und dich an einem ruhigen Ort
                befindest.
            </p>
            <p>
                In jedem Durchgang hörst du zwei Klänge (A und B), die du mit
                den "A starten" und "B starten" Knöpfen starten und stoppen
                kannst. Du kannst sie so oft anhören und zwischen ihnen
                wechseln, wie du möchtest.
            </p>
            <p>
                Wenn du dich entschieden hast, wähle bitte aus, ob du Klang 'A'
                oder Klang 'B' bevorzugt hast (oder einen anderen Vergleich
                machst) oder ob du 'Kein Unterschied' wahrgenommen hast. Klicke
                dann auf 'Weiter', um fortzufahren.
            </p>
            <div class="headphone-check">
                <input
                    type="checkbox"
                    id="headphoneConfirmCheckbox"
                    name="headphoneConfirm"
                />
                <label for="headphoneConfirmCheckbox"
                    >Ich bestätige, dass ich Kopfhörer trage.</label
                >
            </div>
            <div class="submit-area">
                <button id="startButton" disabled>Experiment starten</button>
            </div>
        </div>

        <div id="experiment" style="display: none">
            <h2 id="trialCounter">Durchgang X von Y</h2>
            <p>Höre dir die Intervalle an. Welches klingt richtiger?</p>

            <div class="play-controls">
                <button type="button" class="playButton" data-target="audioA">
                    A starten
                </button>
                <button type="button" class="playButton" data-target="audioB">
                    B starten
                </button>
            </div>

            <div
                class="segmented-picker"
                role="radiogroup"
                aria-labelledby="pickerLabel"
            >
                <button type="button" class="picker-button" data-choice="A">
                    A
                </button>
                <button type="button" class="picker-button" data-choice="None">
                    Kein Unterschied
                </button>
                <button type="button" class="picker-button" data-choice="B">
                    B
                </button>
            </div>

            <div class="submit-area">
                <button type="button" id="submitChoiceButton" disabled>
                    Weiter
                </button>
            </div>
        </div>

        <div id="experienceForm" style="display: none">
            <h2>Musikalische Erfahrung</h2>
            <form id="musicForm">
                <p>Bitte erzähl uns von deiner musikalischen Erfahrung.</p>
                <div id="instrumentContainer">
                    <div class="instrument-row">
                        <select name="instrument">
                            <option value="">
                                Wähle eine Instrumentenkategorie
                            </option>
                            <option value="none">
                                Keine musikalische Erfahrung
                            </option>
                            <option value="Streichinstrument">
                                Streichinstrument
                            </option>
                            <option value="Holzblasinstrument">
                                Holzblasinstrument
                            </option>
                            <option value="Blechblasinstrument">
                                Blechblasinstrument
                            </option>
                            <option value="Tasteninstrument">
                                Tasteninstrument
                            </option>
                            <option value="Schlaginstrument">
                                Schlaginstrument
                            </option>
                            <option value="Zupfinstrument">
                                Zupfinstrument
                            </option>
                            <option value="Gesang">Gesang</option>
                            <option value="Digitale Musikproduktion">
                                Digitale Musikproduktion
                            </option>
                            <option value="Sonstiges">Sonstiges</option>
                        </select>
                        <input
                            type="text"
                            name="customInstrument"
                            placeholder="Falls 'Sonstiges', bitte angeben"
                            style="display: none"
                        />
                        <input
                            type="number"
                            name="years"
                            min="0"
                            placeholder="Jahre gespielt"
                            required
                        />
                        <button type="button" class="removeRow">
                            <svg
                                xmlns="http://www.w3.org/2000/svg"
                                viewBox="0 0 24 24"
                                width="24"
                                height="24"
                            >
                                <circle
                                    cx="12"
                                    cy="12"
                                    r="10"
                                    fill="var(--accent-light)"
                                />
                                <path d="M5 13h14v-2H5z" fill="white" />
                            </svg>
                        </button>
                    </div>
                </div>
                <br />
                <button type="button" id="addInstrument">+</button>
                <br /><br />
                <button type="button" id="submitExperienceButton">
                    Weiter
                </button>
            </form>
        </div>
        <div id="completion" style="display: none">
            <h2>Experiment abgeschlossen!</h2>
            <p>Vielen Dank für deine Teilnahme.</p>
            <textarea
                id="resultsOutput"
                rows="10"
                cols="50"
                readonly
            ></textarea>
        </div>

        <script src="https://unpkg.com/tone"></script>
        <script src="script.js"></script>
    </body>
</html>
